<?php

namespace Birke\NvcBundle\Repositories;

use Doctrine\ORM\EntityRepository;

/**
 * NeedRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class NeedRepository extends EntityRepository
{
    /**
     * @param string $name
     * @param int $limit
     * @return mixed
     */
    public function getLikeName($name, $limit=10){
        $qb = $this->createQueryBuilder('n');
        $qb->andWhere($qb->expr()->like('n.name', ':name'))
            ->setMaxResults($limit)
            ->setParameter('name', "%$name%")
        ;
        return $qb->getQuery()->execute();
    }
}
